(this["webpackJsonpAVALON.IST"]=this["webpackJsonpAVALON.IST"]||[]).push([[0],{176:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){},217:function(e,t,a){e.exports=a(512)},312:function(e,t){},333:function(e,t,a){},334:function(e,t,a){},335:function(e,t,a){},336:function(e,t,a){},337:function(e,t,a){},338:function(e,t,a){},339:function(e,t,a){},340:function(e,t,a){},341:function(e,t,a){},342:function(e,t,a){},343:function(e,t,a){},344:function(e,t,a){},345:function(e,t,a){},509:function(e,t,a){},510:function(e,t,a){},511:function(e,t,a){},512:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(92),i=a.n(r),o=a(31),l=a(20),c=a.n(l),u=a(35),m=a(2),h=a(3),p=a(1),d=a(5),b=a(4),v=a(9),f=a(13),g=a(94),E=a.n(g);E.a.initialize("AVALONIST"),E.a.serverURL="http://localhost:1337/parse";var y=E.a,k=a(214),S=a.n(k)()("http://127.0.0.1:1337"),O=a(56),N=function(e){var t=e.component,a=e.authenticated,n=e.verified,r=Object(O.a)(e,["component","authenticated","verified"]);return s.a.createElement(f.b,Object.assign({},r,{render:function(e){return a?n?s.a.createElement(t,e):s.a.createElement(f.a,{to:{pathname:"/verify",state:{from:e.location}}}):s.a.createElement(f.a,{to:{pathname:"/",state:{from:e.location}}})}}))},w=function(e){var t=e.component,a=e.authenticated,n=(e.verified,Object(O.a)(e,["component","authenticated","verified"]));return s.a.createElement(f.b,Object.assign({},n,{render:function(e){return a?s.a.createElement(f.a,{to:{pathname:"/lobby",state:{from:e.location}}}):s.a.createElement(t,e)}}))},C=function(e){var t=e.component,a=e.authenticated,n=e.verified,r=Object(O.a)(e,["component","authenticated","verified"]);return s.a.createElement(f.b,Object.assign({},r,{render:function(e){return a?n?s.a.createElement(f.a,{to:{pathname:"/lobby",state:{from:e.location}}}):s.a.createElement(t,e):s.a.createElement(f.a,{to:{pathname:"/",state:{from:e.location}}})}}))};function j(e){return{type:"SET_ONLINE",value:e}}var T=a(215),R=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(m.a)(this,a),(s=t.call(this,e)).scrollbars=Object(n.createRef)(),s.top=1,s.threshold=.95,s.autoScroll=s.autoScroll.bind(Object(p.a)(s)),s.getScrollBottom=s.getScrollBottom.bind(Object(p.a)(s)),s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.setThreshold.bind(this)),this.setThreshold()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setThreshold.bind(this))}},{key:"setThreshold",value:function(){this.threshold=window.innerWidth>=800?.975:.875}},{key:"getScrollBottom",value:function(){try{var e=this.scrollbars.current;this.top=e.getValues().top}catch(t){console.log(t)}}},{key:"autoScroll",value:function(){var e=this.scrollbars.current;this.top>this.threshold&&e.scrollToBottom()}},{key:"render",value:function(){return s.a.createElement(T.Scrollbars,{ref:this.scrollbars,autoHide:!0,autoHideTimeout:200,autoHideDuration:200,onScroll:this.getScrollBottom,renderTrackHorizontal:function(e){return s.a.createElement("div",Object.assign({},e,{className:"track-horizontal"}))},renderTrackVertical:function(e){return s.a.createElement("div",Object.assign({},e,{className:"track-vertical"}))},renderThumbHorizontal:function(e){return s.a.createElement("div",Object.assign({},e,{className:"thumb-horizontal"}))},renderThumbVertical:function(e){return s.a.createElement("div",Object.assign({},e,{className:"thumb-vertical"}))},renderView:function(e){return s.a.createElement("div",Object.assign({},e,{className:"view"}))}},this.props.children)}}]),a}(n.Component),x=function(e){return s.a.createElement("button",{className:e.className,onClick:e.onClick,type:e.type},s.a.createElement("p",null,e.text))},M=a(14),P=a(71),L=a(11);P.b.add(L.e,L.g,L.n,L.d,L.i);var A=function(e){return s.a.createElement("div",{className:"input"},s.a.createElement(M.a,{icon:["fas",e.icon]}),s.a.createElement("input",{name:e.name,placeholder:e.placeholder,onChange:e.onChange,type:e.type,required:!0}))},H=function(e){return s.a.createElement("div",{className:"chat-input"},s.a.createElement("input",{onChange:e.onChange,placeholder:"Enter your message here.",value:e.value}),s.a.createElement("button",{type:"submit"},s.a.createElement(M.a,{icon:["fas","paper-plane"]})))},I=a(55);var U=Object(I.b)({notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_NOTES":return t.text;default:return e}},username:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERNAME":return t.text;default:return e}},online:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ONLINE":return t.value;default:return e}}}),B=Object(I.c)(U);function G(){return(G=Object(u.a)(c.a.mark((function e(t,a,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.User.logIn(t,a);case 3:y.Cloud.run("setUsersAcls",{}),B.dispatch(j(!0)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}a(176);var D=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={error:null,username:"",password:""},n.handleUsernameChange=n.handleUsernameChange.bind(Object(p.a)(n)),n.handlePasswordChange=n.handlePasswordChange.bind(Object(p.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"handleUsernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({error:null}),function(e,t,a){G.apply(this,arguments)}(this.state.username,this.state.password,(function(e){return t.setState({error:e})}))}},{key:"render",value:function(){return s.a.createElement("div",{id:"Background",className:"dark full"},s.a.createElement(R,null,s.a.createElement("div",{id:"Login",className:"section"},s.a.createElement("form",{autoComplete:"off",onSubmit:this.handleSubmit},s.a.createElement("div",{className:"logo-big"}),s.a.createElement("h1",null,"THE RESISTANCE: AVALON"),s.a.createElement("h2",null,"WILL GOOD TRIUMPH OVER EVIL?"),s.a.createElement("p",null,s.a.createElement("strong",null,"The Resistance: Avalon")," is a social deduction game created by Don Eskridge."),s.a.createElement("p",{className:"last"},"Based on Arthurian legend, the loyal servants of Arthur work together to find the members of the Resistance while protecting the identity of Merlin. The minions of Mordred attempt to sneak onto the Resistance team in order to deduce the identity of Merlin and assassinate him. Will the minions of Mordred kill Merlin, or will the loyal servants triumph over evil?"),s.a.createElement("p",{className:"last"},"The game is free to play on this site, and always will be."),this.state.error?s.a.createElement("p",{className:"error"},"Error: ",this.state.error):null,s.a.createElement("div",{className:"glow"}),s.a.createElement("div",{className:"after-glow"},s.a.createElement(A,{placeholder:"Username",name:"username",type:"text",icon:"user",onChange:this.handleUsernameChange}),s.a.createElement(A,{placeholder:"Password",name:"password",type:"password",icon:"lock",onChange:this.handlePasswordChange}),s.a.createElement(x,{type:"submit",text:"Login",onClick:void 0,className:""}),s.a.createElement("p",null,s.a.createElement(v.b,{to:"/signup"},"Sign up")))))))}}]),a}(n.Component);function z(){return(z=Object(u.a)(c.a.mark((function e(t,a,n,s){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new y.User).set("email",t),r.set("username",n),r.set("password",a),e.prev=4,e.next=7,r.signUp();case 7:y.Cloud.run("setUsersAcls",{}),B.dispatch(j(!0)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),s(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})))).apply(this,arguments)}var F=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={error:null,username:"",email:"",password:""},n.handleUsernameChange=n.handleUsernameChange.bind(Object(p.a)(n)),n.handleEmailChange=n.handleEmailChange.bind(Object(p.a)(n)),n.handlePasswordChange=n.handlePasswordChange.bind(Object(p.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"handleUsernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({error:null}),function(e,t,a,n){z.apply(this,arguments)}(this.state.email,this.state.password,this.state.username,(function(e){return t.setState({error:e})}))}},{key:"render",value:function(){return s.a.createElement("div",{id:"Background",className:"dark full"},s.a.createElement(R,null,s.a.createElement("div",{id:"Signup",className:"section"},s.a.createElement("form",{autoComplete:"off",onSubmit:this.handleSubmit},s.a.createElement("div",{className:"logo-big"}),s.a.createElement("div",{className:"smoke"}),s.a.createElement("h1",null,"THE RESISTANCE: AVALON"),s.a.createElement("h2",null,"WILL GOOD TRIUMPH OVER EVIL?"),s.a.createElement("p",null,"You are about to join ",s.a.createElement("strong",null,"avalon.ist.")," Enter your login information in the form below."),s.a.createElement("p",{className:"last"},"Upon completing this registration, you have agreed to follow the"," ",s.a.createElement(v.b,{to:"/tou"},"terms of use.")),this.state.error?s.a.createElement("p",{className:"error"},"Error: ",this.state.error):null,s.a.createElement("div",{className:"glow"}),s.a.createElement("div",{className:"after-glow"},s.a.createElement(A,{placeholder:"Username",name:"username",type:"text",icon:"user",onChange:this.handleUsernameChange}),s.a.createElement(A,{placeholder:"Email",name:"email",type:"email",icon:"envelope",onChange:this.handleEmailChange}),s.a.createElement(A,{placeholder:"Password",name:"password",type:"password",icon:"lock",onChange:this.handlePasswordChange}),s.a.createElement(x,{type:"submit",text:"Sign up",onClick:void 0,className:""}),s.a.createElement("p",null,s.a.createElement(v.b,{to:"/"},"Log In")))))))}}]),a}(n.Component);function W(){return(W=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.User.logOut().then((function(){B.dispatch(j(!1))}),(function(e){console.log("error",e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(333);var q=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={points:[0,0,0],showSidebar:!1},n.setClipPath=n.setClipPath.bind(Object(p.a)(n)),n.toggleSidebar=n.toggleSidebar.bind(Object(p.a)(n)),n.handleLogout=n.handleLogout.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.setClipPath),this.setClipPath()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setClipPath)}},{key:"setClipPath",value:function(){var e=document.getElementById("Inner"),t=document.getElementById("Outer");this.setState({points:[e.clientHeight/2,t.clientWidth-e.clientHeight/2,e.clientWidth-e.clientHeight/2]})}},{key:"toggleSidebar",value:function(){this.setState({showSidebar:!this.state.showSidebar})}},{key:"handleLogout",value:function(){!function(){W.apply(this,arguments)}()}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{id:"Navbar-Full",className:"section"},s.a.createElement("div",{id:"Navbar",className:"section"},s.a.createElement("div",{className:"logo"}),s.a.createElement("div",{id:"Outer",style:{clipPath:"polygon(0 0, 100% 0,"+this.state.points[1]+"px 50%, 100% 100%, 0 100%, "+this.state.points[0]+"px 50%)"},className:"links outer"},s.a.createElement("div",{id:"Inner",style:{clipPath:"polygon(0 0, 100% 0, 100% 100%, 0 100%, "+this.state.points[0]+"px 50%)"},className:"links inner"},s.a.createElement("div",null,s.a.createElement(v.b,{to:"/lobby"},"LOBBY"),s.a.createElement(v.b,{to:"/start-here"},"START HERE"),s.a.createElement(v.b,{to:"/community"},"COMMUNITY"),s.a.createElement(v.b,{to:"/stats"},"STATS"),s.a.createElement(v.b,{to:"/dev"},"DEVELOPMENT")),s.a.createElement("div",null,s.a.createElement(v.b,{to:"/profile/"+this.props.username},this.props.username),s.a.createElement("button",{onClick:function(){return console.log("hi")}},s.a.createElement(M.a,{icon:L.c})),s.a.createElement("button",{onClick:this.handleLogout},s.a.createElement(M.a,{icon:L.k})))))),s.a.createElement("div",{id:"Navbar-Mobile",className:"section"},s.a.createElement("div",{className:"logo"}),s.a.createElement("button",{onClick:this.toggleSidebar},s.a.createElement(M.a,{icon:L.f})))),s.a.createElement("div",{className:"links list",style:{transform:this.state.showSidebar?"translate(0%, 0%)":"translate(100%, 0%)"}},s.a.createElement(R,null,s.a.createElement("div",{className:"links container"},s.a.createElement(v.b,{to:"/lobby"},"LOBBY"),s.a.createElement(v.b,{to:"/start-here"},"START HERE"),s.a.createElement(v.b,{to:"/community"},"COMMUNITY"),s.a.createElement(v.b,{to:"/stats"},"STATS"),s.a.createElement(v.b,{to:"/dev"},"DEVELOPMENT"),s.a.createElement("div",null),s.a.createElement(v.b,{to:"/profile/"+this.props.username},"PROFILE"),s.a.createElement("button",{onClick:function(){return console.log("hi")}},"SETTINGS"),s.a.createElement("button",{onClick:this.handleLogout},"LOG OUT")))))}}]),a}(n.Component),V=Object(o.b)((function(e){return{username:e.username}}),null)(q),Y=(a(334),function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).initialHeight=window.innerHeight,e}return Object(h.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{id:"Background-2",className:"dark full"},s.a.createElement(V,{username:""}),s.a.createElement(R,null,s.a.createElement("div",{id:"Verify",style:{minHeight:this.initialHeight+"px"},className:"section"},s.a.createElement("div",{className:"welcome"}),s.a.createElement("h2",null,"WELCOME TO AVALON.IST"),s.a.createElement("p",null,"You have received an email with a confirmation link. If you do not see the email, please check your junk or spam folders. Contact a moderator if you experience any issues. Refresh the page after verification."))))}}]),a}(n.Component)),J=(a(335),function(e){return s.a.createElement("p",{className:"announcement"},s.a.createElement("span",{className:"date"},e.date),s.a.createElement(v.b,{to:"/announcement"},e.text))}),K=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{id:"Announcements",className:"row"},s.a.createElement("h3",null,s.a.createElement("p",null,"LATEST ANNOUNCEMENTS")),s.a.createElement(R,null,s.a.createElement(J,{date:"7/11/2020",text:"This is an announcement"}),s.a.createElement(J,{date:"2/28/2019",text:"This is a larger announcement to test paragraph dimensions"}),s.a.createElement(J,{date:"2/28/2019",text:"This is a larger announcement to test paragraph dimensions"}),s.a.createElement(J,{date:"2/28/2019",text:"This is a larger announcement to test paragraph dimensions"})))}}]),a}(n.Component),_=(a(336),function(e){return s.a.createElement("div",{className:"avatar",style:{backgroundImage:"url("+e.url+")"}})}),Q=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{id:"New-Avatars",className:"row"},s.a.createElement("h3",null,s.a.createElement("p",null,"BRAND NEW AVATARS")),s.a.createElement("div",{className:"ave-container"},s.a.createElement(_,{url:"https://cdn.discordapp.com/attachments/688596182758326313/732067339746541628/base-res.png"}),s.a.createElement(_,{url:"https://cdn.discordapp.com/attachments/688596182758326313/732067339746541628/base-res.png"}),s.a.createElement(_,{url:"https://cdn.discordapp.com/attachments/688596182758326313/732067339746541628/base-res.png"})))}}]),a}(n.Component),X=(a(337),function(e){return s.a.createElement("p",{className:"player"},s.a.createElement(v.b,{className:"player-name",to:"/profile/"+e.username},e.username),s.a.createElement("span",{className:"player-elo"},"1500"))}),Z=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={showTab:!0},n.toggleTab=n.toggleTab.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"toggleTab",value:function(){this.setState({showTab:!this.state.showTab})}},{key:"render",value:function(){return s.a.createElement("div",{className:"the-whole-tab"},s.a.createElement("p",{className:"tab-title"},s.a.createElement("button",{onClick:this.toggleTab},s.a.createElement("i",{className:this.state.showTab?"arrow up":"arrow down"})),s.a.createElement("span",null,this.props.title,"(",this.props.players.length,")")),this.state.showTab?s.a.createElement("div",{className:"player-tab"},this.props.players.map((function(e,t){return s.a.createElement(X,{username:e.username,key:"Player"+t})}))):null)}}]),a}(n.Component),$=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={areAdmins:[],areContribs:[],arePlayers:[],loaded:!0},n.parseClientsOnline=n.parseClientsOnline.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){S.on("clientsOnlineResponse",this.parseClientsOnline).emit("clientsOnlineRequest")}},{key:"componentWillUnmount",value:function(){S.off("clientsOnlineResponse",this.parseClientsOnline)}},{key:"parseClientsOnline",value:function(e){console.log(e)}},{key:"render",value:function(){return s.a.createElement("div",{id:"Player-List",className:"row"},s.a.createElement("h3",null,s.a.createElement("p",null,"PLAYER LIST")),this.state.loaded?s.a.createElement(R,null,s.a.createElement(Z,{title:"Moderators",players:this.state.areAdmins}),s.a.createElement(Z,{title:"Contributors",players:this.state.areContribs}),s.a.createElement(Z,{title:"Players",players:this.state.arePlayers})):null)}}]),a}(n.Component),ee=(a(338),function(e){var t=new Date(e.timestamp),a=["client ","server ","broadcast "][e.type],n=["negative","neutral","positive","highlighted"][e.character+1];return s.a.createElement("div",{className:"message "+a+n},s.a.createElement("span",{className:"hour"},("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)),s.a.createElement("p",{className:"text"},e.type<1?s.a.createElement(v.b,{className:"username",to:"/profile/"+e.author},e.author,":"):null,s.a.createElement("span",{className:"content"},e.content)))}),te=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(m.a)(this,a),(s=t.call(this,e)).scrollbars=Object(n.createRef)(),s.eventNames=["generalChatUpdate","generalChatResponse","generalChatJoin","generalChatLeave","generalChatRequest","messageToGeneral"],s.state={messages:[],content:""},s.toGameChat=s.toGameChat.bind(Object(p.a)(s)),s.startChat=s.startChat.bind(Object(p.a)(s)),s.endChat=s.endChat.bind(Object(p.a)(s)),s.triggerRequest=s.triggerRequest.bind(Object(p.a)(s)),s.parseChat=s.parseChat.bind(Object(p.a)(s)),s.handleChange=s.handleChange.bind(Object(p.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(p.a)(s)),s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){void 0===this.props.code?this.startChat():this.props.code>-1&&(this.toGameChat(),this.startChat())}},{key:"componentWillUnmount",value:function(){this.endChat()}},{key:"componentDidUpdate",value:function(e){e.code!==this.props.code&&this.props.code&&this.props.code>-1&&(this.toGameChat(),this.startChat()),this.scrollbars.current.autoScroll()}},{key:"toGameChat",value:function(){this.eventNames=["gameChatUpdate","gameChatResponse"+this.props.code,"gameChatJoin","gameChatLeave","gameChatRequest","messageToGame"]}},{key:"startChat",value:function(){S.on(this.eventNames[0],this.triggerRequest),S.on(this.eventNames[1],this.parseChat),this.triggerRequest()}},{key:"endChat",value:function(){S.off(this.eventNames[0],this.triggerRequest),S.off(this.eventNames[1],this.parseChat)}},{key:"triggerRequest",value:function(){console.log(this.props.code),S.emit(this.eventNames[4],{roomNumber:this.props.code})}},{key:"parseChat",value:function(e){this.setState({messages:e})}},{key:"handleChange",value:function(e){this.setState({content:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),""!==this.state.content&&(S.emit(this.eventNames[5],{content:this.state.content,roomNumber:this.props.code}),this.setState({content:""}))}},{key:"render",value:function(){return s.a.createElement("div",{id:"Chat",className:"row"},s.a.createElement(R,{ref:this.scrollbars},this.state.messages.map((function(e,t){return s.a.createElement(ee,Object.assign({},e,{key:"message"+t}))}))),s.a.createElement("form",{className:"message-input",onSubmit:this.handleSubmit},s.a.createElement(H,{onChange:this.handleChange,value:this.state.content})))}}]),a}(n.Component),ae=a(21),ne=(a(339),function(e){return s.a.createElement("label",{className:"switch"},s.a.createElement("input",{readOnly:!0,checked:e.value,onClick:e.onClick,type:"checkbox"}),s.a.createElement("span",{className:"slider"}))}),se=(a(340),function(e){return s.a.createElement("div",{className:"list"},s.a.createElement("button",{className:"list-button "+e.show,onClick:e.onClick,type:"button"},s.a.createElement("p",null,e.title),s.a.createElement(M.a,{icon:L.a})),s.a.createElement("div",{className:"dropdown-content"},e.show?e.objects.map((function(e,t){return s.a.createElement("button",{className:"dropdown-item",key:"option"+t,onClick:e.onClick,type:"button"},s.a.createElement("p",null,e.text))})):null))}),re=(a(177),function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).fabFour={merlin:!0,percival:!0,morgana:!0,assassin:!0,oberon:!1,mordred:!1,card:!1},n.eightPlayers={merlin:!0,percival:!0,morgana:!0,assassin:!0,oberon:!1,mordred:!1,card:!0},n.ninePlayers={merlin:!0,percival:!0,morgana:!0,assassin:!0,oberon:!1,mordred:!0,card:!0},n.tenPlayers={merlin:!0,percival:!0,morgana:!0,assassin:!0,oberon:!0,mordred:!0,card:!0},n.state={showPlayerMax:!1,playerMax:6,roleSettings:{merlin:!0,percival:!0,morgana:!0,assassin:!0,oberon:!1,mordred:!1,card:!1},redirect:!1,processing:!1,playerRoom:-1},n.createGameSuccess=n.createGameSuccess.bind(Object(p.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(p.a)(n)),n.sendCreateRequest=n.sendCreateRequest.bind(Object(p.a)(n)),n.sendModifyRequest=n.sendModifyRequest.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){S.on("createGameSuccess",this.createGameSuccess)}},{key:"createGameSuccess",value:function(e){this.setState({processing:!1,redirect:!0,playerRoom:e})}},{key:"handleSubmit",value:function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),this.setState({processing:!0},this.props.createsGame?this.sendCreateRequest:this.sendModifyRequest);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendCreateRequest",value:function(){S.emit("createGame",{roleSettings:this.state.roleSettings,maxPlayers:this.state.playerMax})}},{key:"sendModifyRequest",value:function(){S.emit("editGame",{roomNumber:this.props.roomToModify,roleSettings:this.state.roleSettings,maxPlayers:this.state.playerMax}),this.props.onExit()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"settings-form"},this.state.redirect?s.a.createElement(f.a,{to:"/game/"+this.state.playerRoom}):null,s.a.createElement("form",{autoComplete:"off",onSubmit:this.handleSubmit},s.a.createElement("p",{className:"title"},this.props.title),s.a.createElement("div",{className:"input-container"},s.a.createElement("p",{className:"handle"},"Player Max")," ",s.a.createElement(se,{onClick:function(){return e.setState({showPlayerMax:!e.state.showPlayerMax})},show:this.state.showPlayerMax,title:this.state.playerMax.toString(),objects:[{text:"5",onClick:function(){return e.setState({playerMax:5,showPlayerMax:!1,roleSettings:e.fabFour})}},{text:"6",onClick:function(){return e.setState({playerMax:6,showPlayerMax:!1,roleSettings:e.fabFour})}},{text:"7",onClick:function(){return e.setState({playerMax:7,showPlayerMax:!1,roleSettings:e.fabFour})}},{text:"8",onClick:function(){return e.setState({playerMax:8,showPlayerMax:!1,roleSettings:e.eightPlayers})}},{text:"9",onClick:function(){return e.setState({playerMax:9,showPlayerMax:!1,roleSettings:e.ninePlayers})}},{text:"10",onClick:function(){return e.setState({playerMax:10,showPlayerMax:!1,roleSettings:e.tenPlayers})}}]})),s.a.createElement("p",{className:"subtitle"},"Roles"),s.a.createElement("div",{className:"input-container"},s.a.createElement(ne,{value:this.state.roleSettings.merlin,onClick:function(){return e.setState({roleSettings:Object(ae.a)(Object(ae.a)({},e.state.roleSettings),{},{merlin:!e.state.roleSettings.merlin})})}}),s.a.createElement("p",{className:"handle"},"Merlin")),s.a.createElement("div",{className:"input-container"},s.a.createElement(ne,{value:this.state.roleSettings.percival,onClick:function(){return e.setState({roleSettings:Object(ae.a)(Object(ae.a)({},e.state.roleSettings),{},{percival:!e.state.roleSettings.percival})})}}),s.a.createElement("p",{className:"handle"},"Percival")),s.a.createElement("div",{className:"input-container"},s.a.createElement(ne,{value:this.state.roleSettings.morgana,onClick:function(){return e.setState({roleSettings:Object(ae.a)(Object(ae.a)({},e.state.roleSettings),{},{morgana:!e.state.roleSettings.morgana})})}}),s.a.createElement("p",{className:"handle"},"Morgana")),s.a.createElement("div",{className:"input-container"},s.a.createElement(ne,{value:this.state.roleSettings.assassin,onClick:function(){return e.setState({roleSettings:Object(ae.a)(Object(ae.a)({},e.state.roleSettings),{},{assassin:!e.state.roleSettings.assassin})})}}),s.a.createElement("p",{className:"handle"},"Assassin")),s.a.createElement("div",{className:"input-container"},s.a.createElement(ne,{value:this.state.roleSettings.oberon,onClick:function(){return e.setState({roleSettings:Object(ae.a)(Object(ae.a)({},e.state.roleSettings),{},{oberon:!e.state.roleSettings.oberon})})}}),s.a.createElement("p",{className:"handle"},"Oberon")),s.a.createElement("div",{className:"input-container"},s.a.createElement(ne,{value:this.state.roleSettings.mordred,onClick:function(){return e.setState({roleSettings:Object(ae.a)(Object(ae.a)({},e.state.roleSettings),{},{mordred:!e.state.roleSettings.mordred})})}}),s.a.createElement("p",{className:"handle"},"Mordred")),s.a.createElement("p",{className:"subtitle"},"Cards"),s.a.createElement("div",{className:"input-container"},s.a.createElement(ne,{value:this.state.roleSettings.card,onClick:function(){return e.setState({roleSettings:Object(ae.a)(Object(ae.a)({},e.state.roleSettings),{},{card:!e.state.roleSettings.card})})}}),s.a.createElement("p",{className:"handle"},"Lady of the Lake")),this.state.processing?null:s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{className:"bt-cancel",type:"button",onClick:this.props.onExit},s.a.createElement(M.a,{icon:L.m})),s.a.createElement("button",{className:"bt-accept",type:"submit"},s.a.createElement(M.a,{icon:L.b})))))}}]),a}(n.Component)),ie=(a(341),function(e){return s.a.createElement("div",{className:"avatar",style:{backgroundImage:"url("+e.url+")"}})}),oe=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).gameStateClass=["waiting","in-progress","finished","paused","frozen"],n.gameState=["Waiting","In Progress","Finished","Paused","Frozen"],n.state={results:[],avatars:[],host:"",mode:"",spectators:-1,gameState:-1},n.triggerRequest=n.triggerRequest.bind(Object(p.a)(n)),n.parseRoomLink=n.parseRoomLink.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){S.on("roomLinkUpdate"+this.props.no,this.triggerRequest),S.on("roomLinkResponse"+this.props.no,this.parseRoomLink),S.emit("roomLinkJoin",{roomNumber:this.props.no})}},{key:"componentWillUnmount",value:function(){S.off("roomLinkUpdate"+this.props.no,this.triggerRequest),S.off("roomLinkResponse"+this.props.no,this.parseRoomLink),S.emit("roomLinkLeave",{roomNumber:this.props.no})}},{key:"triggerRequest",value:function(){S.emit("roomLinkRequest",{roomNumber:this.props.no})}},{key:"parseRoomLink",value:function(e){this.setState(e)}},{key:"render",value:function(){return s.a.createElement(v.b,{className:"game",to:"/game/"+this.props.no},s.a.createElement("h3",null,s.a.createElement("p",null,"ROOM ","#"+this.props.no),this.state.gameState>-1?s.a.createElement("p",{className:this.gameStateClass[this.state.gameState]},this.gameState[this.state.gameState]):null),s.a.createElement("p",{className:"tracker"},this.state.results.map((function(e,t){return s.a.createElement("span",{key:t,className:"mission "+e})}))),s.a.createElement("p",null,s.a.createElement("span",{className:"title"},"HOST:"),this.state.host),s.a.createElement("p",null,s.a.createElement("span",{className:"title"},"MODE:"),this.state.mode),s.a.createElement("p",null,s.a.createElement("span",{className:"title"},"SPECTATORS:"),this.state.spectators),s.a.createElement("div",{className:"avatars"},this.state.avatars.map((function(e,t){return s.a.createElement(ie,{key:t,url:e})}))))}}]),a}(n.Component),le=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={gameIds:[],showCreate:!1},n.triggerRequest=n.triggerRequest.bind(Object(p.a)(n)),n.parseRoomList=n.parseRoomList.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){S.on("roomListUpdate",this.triggerRequest),S.on("roomListResponse",this.parseRoomList),S.emit("roomListJoin")}},{key:"componentWillUnmount",value:function(){S.off("roomListUpdate",this.triggerRequest),S.off("roomListResponse",this.parseRoomList),S.emit("roomListLeave")}},{key:"triggerRequest",value:function(){S.emit("roomListRequest")}},{key:"parseRoomList",value:function(e){this.setState({gameIds:e})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{id:"Game-List",className:"row"},s.a.createElement("h3",null,s.a.createElement("p",null,"CURRENT GAMES")),s.a.createElement("div",{className:"game-list-settings"},s.a.createElement("button",{className:"game-list-create",onClick:function(){return e.setState({showCreate:!e.state.showCreate})}},"CREATE")),s.a.createElement(R,null,this.state.gameIds.map((function(e){return s.a.createElement(oe,{no:e,key:"Game"+e})})).reverse()),this.state.showCreate?s.a.createElement(re,{title:"CREATE A NEW GAME",onExit:function(){return e.setState({showCreate:!1})},createsGame:!0}):null)}}]),a}(n.Component),ce=(a(342),function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).initialHeight=Math.max(window.innerHeight,630),e}return Object(h.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{id:"Background-2",className:"light full"},s.a.createElement(V,{username:""}),s.a.createElement(R,null,s.a.createElement("div",{id:"Lobby",className:"section",style:{minHeight:this.initialHeight+"px"}},s.a.createElement("div",{className:"column section"},s.a.createElement("div",{id:"Welcome",className:"row"}),s.a.createElement(K,null),s.a.createElement(Q,null),s.a.createElement($,null)),s.a.createElement("div",{className:"column section"},s.a.createElement(te,null)),s.a.createElement("div",{className:"column section"},s.a.createElement(le,null)))))}}]),a}(n.Component)),ue=(a(178),function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).player="I don't exist",e}return Object(h.a)(a,[{key:"render",value:function(){return s.a.createElement("p",null,"This is ",this.props.match.params.username,"'s profile: ",this.player)}}]),a}(n.Component)),me=(a(343),function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(m.a)(this,a),(s=t.call(this,e)).textarea=Object(n.createRef)(),s.autoSetHeight=s.autoSetHeight.bind(Object(p.a)(s)),s.handleChange=s.handleChange.bind(Object(p.a)(s)),s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.autoSetHeight()}},{key:"componentDidUpdate",value:function(e){e.notes!==this.props.notes&&this.autoSetHeight()}},{key:"autoSetHeight",value:function(){var e=this.textarea.current;e.style.height="auto",e.style.height=e.scrollHeight+"px"}},{key:"handleChange",value:function(e){this.props.dispatch({type:"ADD_NOTES",text:e.target.value})}},{key:"render",value:function(){return s.a.createElement("div",{id:"Notes",className:"row"},s.a.createElement(R,null,s.a.createElement("textarea",{value:this.props.notes,ref:this.textarea,onChange:this.handleChange,spellCheck:!1,placeholder:"Write your notes here!"})))}}]),a}(n.Component)),he=Object(o.b)((function(e){return{notes:e.notes}}),null)(me),pe=(a(344),function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={loading:!0,rowHeight:0},n.setRowHeight=n.setRowHeight.bind(Object(p.a)(n)),n.SetHeaders=n.SetHeaders.bind(Object(p.a)(n)),n.SetPlayers=n.SetPlayers.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"setRowHeight",value:function(){if(!this.state.loading){var e=document.getElementById("Vote-History").offsetWidth;this.setState({rowHeight:e/70})}}},{key:"componentDidMount",value:function(){this.setState({loading:!1},this.setRowHeight),window.addEventListener("resize",this.setRowHeight)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setRowHeight)}},{key:"componentDidUpdate",value:function(e){var t=e.game,a=this.props.game;t.results===a.results&&t.missionLeader===a.missionLeader&&t.missionVotes===a.missionVotes&&t.missionTeams===a.missionTeams||this.setState({loading:!1},this.setRowHeight)}},{key:"SetHeaders",value:function(){for(var e=[],t=this.props.game,a=0;a<5;a++)t.missionVotes[a].length>0&&e.push(s.a.createElement("th",{className:"vh-row mission "+t.results[a],colSpan:t.missionVotes[a].length,key:"Mission"+a},"Mission ",a+1));return s.a.createElement("tr",{className:"vh-col",style:{fontSize:this.state.rowHeight+"px"}},s.a.createElement("th",{className:"vh-row title"},"Players"),e)}},{key:"SetPlayers",value:function(e){for(var t=[],a=this.props.game,n=["undefined","false","true"],r=function(r){a.missionVotes[r].length>0&&(t=t.concat(a.missionVotes[r].map((function(t,i){var o;return s.a.createElement("td",{className:(a.missionLeader[r][i]===e.ip?"leader ":"")+"vh-vote "+n[t[e.ip]+1],key:"M"+r+i+"P"+e.ip},(null===(o=a.missionTeams[r][i])||void 0===o?void 0:o.includes(e.ip))?s.a.createElement(M.a,{className:"checkmark",icon:L.b}):null)}))))},i=0;i<5;i++)r(i);return s.a.createElement("tr",{className:"vh-col",style:{fontSize:this.state.rowHeight+"px"}},s.a.createElement("td",{className:"vh-row"},e.p),t)}},{key:"render",value:function(){var e=this;return s.a.createElement(R,null,s.a.createElement("div",{id:"Vote-History",className:"row"},this.state.loading?null:s.a.createElement("table",{id:"vh-cont",className:"vh-cont"},s.a.createElement("tbody",null,s.a.createElement(this.SetHeaders,null),this.props.game.players.map((function(t,a){return s.a.createElement(e.SetPlayers,{ip:a,p:t,key:t})}))))))}}]),a}(n.Component)),de=(a(345),function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={tab:1},n.Tab=n.Tab.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"Tab",value:function(e){var t=this,a=this.state.tab===e.no;return s.a.createElement("button",{className:"tag "+a,onClick:function(){return t.setState({tab:e.no})}},s.a.createElement("p",null,e.text))}},{key:"render",value:function(){var e=[s.a.createElement(te,{key:"genChat"}),s.a.createElement(te,{code:this.props.game.code,key:"gameChat"}),s.a.createElement(he,{notes:"",dispatch:o.c}),s.a.createElement(pe,{game:this.props.game}),s.a.createElement($,null)];return s.a.createElement("div",{id:"Tabs",className:"tab"},s.a.createElement("div",{className:"tab-row"},s.a.createElement(this.Tab,{text:"ALL CHAT",no:0}),s.a.createElement(this.Tab,{text:"GAME CHAT",no:1}),s.a.createElement(this.Tab,{text:"NOTES",no:2}),s.a.createElement(this.Tab,{text:"VOTES",no:3}),s.a.createElement(this.Tab,{text:"PLAYERS",no:4})),e[this.state.tab])}}]),a}(n.Component)),be=a(95),ve=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={playerMax:6,roleSettings:{merlin:!0,percival:!0,morgana:!0,assassin:!0,oberon:!1,mordred:!1,card:!1}},n}return Object(h.a)(a,[{key:"render",value:function(){var e=[],t=[];return this.state.roleSettings.merlin&&e.push("Merlin"),this.state.roleSettings.percival&&e.push("Percival"),this.state.roleSettings.morgana&&e.push("Morgana"),this.state.roleSettings.assassin&&e.push("Assassin"),this.state.roleSettings.oberon&&e.push("Oberon"),this.state.roleSettings.mordred&&e.push("Mordred"),this.state.roleSettings.card&&t.push("Lady of the Lake"),s.a.createElement("div",{className:"settings-form"},s.a.createElement("form",{autoComplete:"off"},s.a.createElement("p",{className:"title"},"GAME INFO"),s.a.createElement("p",{className:"subtitle"},"Player Max"),s.a.createElement("div",{className:"input-container"},s.a.createElement("p",{className:"handle"},this.state.playerMax)," "),s.a.createElement("p",{className:"subtitle"},"Roles"),s.a.createElement("div",{className:"input-container"},s.a.createElement("p",{className:"handle"},e.toString().replace(/,/g,", "))," "),s.a.createElement("p",{className:"subtitle"},"Cards"),s.a.createElement("div",{className:"input-container"},s.a.createElement("p",{className:"handle"},t.toString().replace(/,/g,", "))," "),s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{className:"bt-cancel",type:"button",onClick:this.props.onExit},s.a.createElement(M.a,{icon:L.m})))))}}]),a}(n.Component),fe=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(m.a)(this,a),(s=t.call(this,e)).formRef=Object(n.createRef)(),s.state={showForm:!1},s.formSetup=s.formSetup.bind(Object(p.a)(s)),s.sitAndStand=s.sitAndStand.bind(Object(p.a)(s)),s.startGame=s.startGame.bind(Object(p.a)(s)),s.pickTeam=s.pickTeam.bind(Object(p.a)(s)),s.voteForMission=s.voteForMission.bind(Object(p.a)(s)),s.voteForSuccess=s.voteForSuccess.bind(Object(p.a)(s)),s.shootPlayer=s.shootPlayer.bind(Object(p.a)(s)),s.cardPlayer=s.cardPlayer.bind(Object(p.a)(s)),s}return Object(h.a)(a,[{key:"formSetup",value:function(){var e=this;this.setState({showForm:!0},(function(){e.formRef.current.setState({roleSettings:e.props.roleSettings,playerMax:e.props.playerMax})}))}},{key:"sitAndStand",value:function(){S.emit("joinLeaveGame",{roomNumber:this.props.code,canSit:!0})}},{key:"startGame",value:function(){this.props.players.length<5||S.emit("startGame",{roomNumber:this.props.code})}},{key:"pickTeam",value:function(){this.props.picks.length===this.props.selected.length&&S.emit("pickTeam",{roomNumber:this.props.code,team:this.props.selected})}},{key:"voteForMission",value:function(e){this.props.seat>-1&&this.props.votesRound[this.props.seat]<0&&S.emit("voteForMission",{roomNumber:this.props.code,vote:e})}},{key:"voteForSuccess",value:function(e){this.props.seat>-1&&this.props.voted.includes(this.props.seat)&&S.emit("voteForSuccess",{roomNumber:this.props.code,vote:e})}},{key:"shootPlayer",value:function(){var e=this.props.selected[0];this.props.seat>-1&&this.props.assassin&&1===this.props.selected.length&&!["Spy?","Assassin"].includes(this.props.privateKnowledge[e])&&S.emit("shootPlayer",{roomNumber:this.props.code,shot:e})}},{key:"cardPlayer",value:function(){var e=this.props.selected[0];this.props.seat>-1&&this.props.seat===this.props.card&&this.props.seat===e&&S.emit("cardPlayer",{roomNumber:this.props.code,carded:e})}},{key:"onWaiting",value:function(e){if(e.loading=!1,0===this.props.seat)e.showButtonThree=!0,e.text="Modify settings or start the game.",e.buttonOne.text="SETTINGS",e.buttonOne.className="neutral",e.buttonOne.onClick=this.formSetup,e.buttonTwo.text="START",e.buttonTwo.className=this.props.players.length<5?"disabled":"confirm",e.buttonTwo.onClick=this.startGame,e.buttonThree.text="STAND UP",e.buttonThree.className="cancel",e.buttonThree.onClick=this.sitAndStand;else{var t=this.props.players[0];e.text="Waiting for "+t+" to start the game.",e.buttonOne.text="INFO",e.buttonOne.className="neutral",e.buttonOne.onClick=this.formSetup,e.buttonTwo.text=this.props.seat>-1?"STAND UP":"SIT",e.buttonTwo.className=this.props.seat>-1?"cancel":"confirm",e.buttonTwo.onClick=this.sitAndStand}return e}},{key:"onPicking",value:function(e){if(e.loading=!1,this.props.leader===this.props.seat){var t=this.props.picks.length;e.showButtonTwo=!1,e.text="It's your turn to select a team. Choose "+t+" players.",e.buttonOne.text="CONFIRM",e.buttonOne.className=this.props.picks.length!==this.props.selected.length?"disabled":"confirm",e.buttonOne.onClick=this.pickTeam}else{var a=this.props.players[this.props.leader];e.showButtonOne=!1,e.showButtonTwo=!1,e.text="Waiting for "+a+" to select a team."}return e}},{key:"onVoting",value:function(e){var t=this;if(e.loading=!1,this.props.seat>-1&&this.props.votesRound[this.props.seat]<0){var a=this.props.players[this.props.leader],n=this.props.players.filter((function(e,a){return t.props.picks.includes(a)})).toString();e.text="Its your turn to vote. "+a+" has selected: "+n.replace(/,/g,", "),e.buttonOne.text="APPROVE",e.buttonOne.className="confirm",e.buttonOne.onClick=function(){return t.voteForMission(1)},e.buttonTwo.text="REJECT",e.buttonTwo.className="cancel",e.buttonTwo.onClick=function(){return t.voteForMission(0)}}else{var s=this.props.players.filter((function(e,a){return t.props.votesRound[a]<0})).toString();e.showButtonOne=!1,e.showButtonTwo=!1,e.text="Waiting for "+s.replace(/,/g,", ")+" to vote."}return e}},{key:"onMission",value:function(e){var t=this;if(e.loading=!1,this.props.seat>-1&&this.props.voted.includes(this.props.seat))e.text="Its your turn to vote. Choose the fate of this mission.",e.buttonOne.text="SUCCEED",e.buttonOne.className="confirm",e.buttonOne.onClick=function(){return t.voteForSuccess(1)},e.buttonTwo.text="FAIL",e.buttonTwo.className="cancel",e.buttonTwo.onClick=function(){return t.voteForSuccess(0)};else{var a=this.props.players.filter((function(e,a){return t.props.voted.includes(a)})).toString();e.showButtonOne=!1,e.showButtonTwo=!1,e.text="Waiting for "+a.replace(/,/g,", ")+" to vote."}return e}},{key:"onCarding",value:function(e){if(e.loading=!1,this.props.seat>-1&&this.props.seat===this.props.card)e.showButtonTwo=!1,e.text="You have Lady of the Lake. Select a player to reveal their role.",e.buttonOne.text="CONFIRM",e.buttonOne.className=1!==this.props.selected.length?"disabled":"confirm",e.buttonOne.onClick=this.cardPlayer;else{var t=this.props.players[this.props.card];e.showButtonOne=!1,e.showButtonTwo=!1,e.text="Waiting for "+t+" to use lady of the lake."}return e}},{key:"onAssassination",value:function(e){return e.loading=!1,this.props.seat>-1&&this.props.assassin?(e.showButtonTwo=!1,e.text="Is your turn to kill Merlin! Choose a target.",e.buttonOne.text="CONFIRM",e.buttonOne.className=1!==this.props.selected.length?"disabled":"confirm",e.buttonOne.onClick=this.shootPlayer):(e.showButtonOne=!1,e.showButtonTwo=!1,e.text="Waiting for assassin to select a target."),e}},{key:"inProgress",value:function(e){switch(this.props.stage){case"PICKING":return this.onPicking(e);case"VOTING":return this.onVoting(e);case"MISSION":return this.onMission(e);case"CARDING":return this.onCarding(e);case"ASSASSINATION":return this.onAssassination(e);default:return e}}},{key:"onFinish",value:function(e){return e.loading=!1,e.showButtonOne=!1,e.showButtonTwo=!1,e.text=["Merlin has been killed! The Spies Win.","Merlin was not killed! The Resistance wins.","Three missions have failed! The Spies Win.","Mission hammer was rejected! The Spies Win.","Three missions have succeeded! The Resistance wins."][this.props.cause?this.props.cause:0],e}},{key:"onFreeze",value:function(e){return e.loading=!1,e.showButtonOne=!1,e.showButtonTwo=!1,!1===this.props.ended?e.text="The game has been paused by a moderator.":!0===this.props.ended&&(e.text="The game has been frozen by a moderator."),e}},{key:"render",value:function(){var e=this,t={loading:!0,text:"",showButtonOne:!0,showButtonTwo:!0,showButtonThree:!1,buttonOne:{type:"button",text:"",onClick:function(){},className:""},buttonTwo:{type:"button",text:"",onClick:function(){},className:""},buttonThree:{type:"button",text:"",onClick:function(){},className:""}};return!1===this.props.started?t=this.onWaiting(t):!1===this.props.frozen?!1===this.props.ended?t=this.inProgress(t):!0===this.props.ended&&(t=this.onFinish(t)):!0===this.props.frozen&&(t=this.onFreeze(t)),t.loading?null:s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{className:"message"},t.text)," ",t.showButtonOne?s.a.createElement("div",{className:"button-cont"}," ",s.a.createElement(x,t.buttonOne)," "):null,t.showButtonTwo?s.a.createElement("div",{className:"button-cont"},s.a.createElement(x,t.buttonTwo)," "):null,t.showButtonThree?s.a.createElement("div",{className:"button-cont"}," ",s.a.createElement(x,t.buttonThree)," "):null,this.state.showForm?0===this.props.seat?s.a.createElement(re,{ref:this.formRef,title:"MODIFY GAME SETTINGS",onExit:function(){return e.setState({showForm:!1})},createsGame:!1,roomToModify:this.props.code}):s.a.createElement(ve,{ref:this.formRef,onExit:function(){return e.setState({showForm:!1})}}):null)}}]),a}(n.Component),ge=a(216),Ee=(a(509),function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(m.a)(this,a),(s=t.call(this,e)).background=["none","res","spy"],s.shieldLocation=Object(n.createRef)(),s.state={shieldPosition:[0,0],shieldShow:!1,shieldScale:1,avatarInitialPosition:[0,0],avatarPosition:[0,0],avatarShow:!1,avatarSize:350,currentBackground:0,currentHighlight:{r:255,g:204,b:0,a:100},renderPicker:!1,renderButtons:!1,picked:!1,width:0},s.handleHighlight=s.handleHighlight.bind(Object(p.a)(s)),s}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e){e.isPickable!==this.props.isPickable&&this.setState({picked:!1})}},{key:"handleHighlight",value:function(e){this.setState({currentHighlight:e.rgb})}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{id:"Avatar-UI",style:{top:this.state.avatarPosition[0]+"px",left:this.state.avatarPosition[1]+"px",display:this.state.avatarShow?void 0:"none"},onMouseOver:function(){return e.setState({renderButtons:!0})},onMouseLeave:function(){return e.setState({renderButtons:!1})}},s.a.createElement("div",{id:"ave-graphics",style:{width:this.state.avatarSize+"px",height:this.state.avatarSize+"px",maxHeight:Math.max(.06*this.state.width,45)+"px",maxWidth:Math.max(.06*this.state.width,45)+"px"}},s.a.createElement("div",{id:"ave-background",className:this.background[this.state.currentBackground]+" "+(this.state.picked&&this.props.isPickable?"picked":"")}),s.a.createElement("div",{className:(this.props.isRes?"ave-res":"ave-spy")+" tooltip "+(this.props.isPickable?"pickable":"not-pickable"),style:{backgroundImage:"url("+(this.props.isRes?this.props.resUrl:this.props.spyUrl)+")"},onClick:function(){return e.setState({picked:e.props.isPickable&&!e.state.picked},e.props.table.countSelected)}},this.props.isPickable?s.a.createElement("span",{className:"tooltip-text"},"Click on this player to pick them"):null),this.props.onMission?s.a.createElement("div",{className:"ave-shield",ref:this.shieldLocation},this.state.shieldShow?s.a.createElement("div",{style:{transform:"scale("+this.state.shieldScale+")",top:this.state.shieldPosition[0]+"px",left:this.state.shieldPosition[1]+"px"},className:"ave-shield-display"}):null):null,this.props.leader?s.a.createElement("div",{className:"ave-flag"}):null,this.props.vote>-1?s.a.createElement("div",{className:"ave-vote-bubble "+(1===this.props.vote)}):null,this.state.renderButtons?s.a.createElement("div",{className:"ave-buttons"},s.a.createElement("button",{onClick:function(){return e.setState({currentBackground:(e.state.currentBackground+1)%3})},className:"tooltip"},s.a.createElement("span",{className:"tooltip-text"},"Mark this player's allegiance"),s.a.createElement(M.a,{icon:L.l})),s.a.createElement("button",{className:"tooltip"},s.a.createElement("span",{className:"tooltip-text"},"Highlight this player's chat messages"),s.a.createElement(M.a,{icon:L.j})),s.a.createElement("button",{onClick:function(){return e.setState({renderPicker:!e.state.renderPicker})},className:"tooltip"},s.a.createElement("span",{className:"tooltip-text"},"Change this player's highlight color"),s.a.createElement(M.a,{icon:L.h}))):null),s.a.createElement("p",{className:"ave-username",style:{width:Math.max(.15*this.state.width,40)+"px",fontSize:Math.max(.01*this.state.width,10)+"px"}},this.props.username),s.a.createElement("p",{className:"ave-role "+this.props.isRes,style:{opacity:"Spy?"!==this.props.role&&"Resistance?"!==this.props.role?"1":"0",fontSize:Math.max(.008*this.state.width,8)+"px"}},this.props.role)),this.state.renderPicker?s.a.createElement("div",{className:"hl-picker"},s.a.createElement("div",{className:"hl-stuff"},s.a.createElement("p",null,"CHANGE HIGHLIGHT COLOR"),s.a.createElement(ge.SketchPicker,{color:this.state.currentHighlight,onChange:this.handleHighlight}),s.a.createElement("button",{onClick:function(){return e.setState({renderPicker:!e.state.renderPicker})}},s.a.createElement(M.a,{icon:L.b})))):null)}}]),a}(n.Component)),ye=(a(510),function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=[["2","3","2","3","3"],["2","3","4","3","4"],["2","3","3","4*","4"],["3","4","4","5*","5"],["3","4","4","5*","5"],["3","4","4","5*","5"]],a=[this.props.results[0],this.props.results[1],this.props.results[2],this.props.results[3],this.props.results[4]],n=new Array(5).fill(!1).fill(!0,0,this.props.round+1);return s.a.createElement("div",{className:"mission-tracker"},s.a.createElement("div",{className:"mission-container"},a.map((function(a,n){return s.a.createElement("div",{className:"mission "+a,key:"mission"+n},s.a.createElement("p",null,t[e.props.count][n])," ")}))),s.a.createElement("div",{className:"rounds-container"},n.map((function(e,t){return s.a.createElement("div",{className:"round "+e,key:"round"+t})}))))}}]),a}(n.Component)),ke=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(m.a)(this,a),(s=t.call(this,e)).tableRef=Object(n.createRef)(),s.centerRef=Object(n.createRef)(),s.seatRef=[],s.avatarRef=[],s.allTimeouts=[],s.state={left:[],right:[],top:[],bot:[],width:0,redirect:!1,selected:[]},s.createSeats=s.createSeats.bind(Object(p.a)(s)),s.countSelected=s.countSelected.bind(Object(p.a)(s)),s.resizeTable=s.resizeTable.bind(Object(p.a)(s)),s.initAvatars=s.initAvatars.bind(Object(p.a)(s)),s.moveAvatars=s.moveAvatars.bind(Object(p.a)(s)),s.moveShields=s.moveShields.bind(Object(p.a)(s)),s.leaveLobby=s.leaveLobby.bind(Object(p.a)(s)),s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resizeTable)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeTable),this.allTimeouts.forEach((function(e){return clearTimeout(e)})),this.leaveLobby()}},{key:"componentDidUpdate",value:function(e){if(e!==this.props){var t=function(){};e.game.players.length===this.props.game.players.length&&e.game.started===this.props.game.started||(t=this.resizeTable),e.game.picks.includes(-1)&&!this.props.game.picks.includes(-1)&&(t=this.moveShields),this.createSeats(t)}}},{key:"createSeats",value:function(e){var t=this.props.game,a=[],s=[],r=[],i=[];this.seatRef=[],this.avatarRef=[];for(var o=Object(be.a)(t.players),l=0;l<o.length;l++){this.seatRef[l]=Object(n.createRef)(),this.avatarRef[l]=Object(n.createRef)();var c=t.privateKnowledge.length>0&&!0!==t.ended?Object(be.a)(t.privateKnowledge):Object(be.a)(t.publicKnowledge),u=t.assassin&&"ASSASSINATION"===t.stage,m=t.seat===t.leader&&"PICKING"===t.stage,h=t.seat===t.card&&"CARDING"===t.stage,p="VOTING"===t.stage,d={spyUrl:"https://cdn.discordapp.com/attachments/612734001916018707/736446594936733786/base-spy.png",resUrl:"https://cdn.discordapp.com/attachments/688596182758326313/732067339746541628/base-res.png",username:o[l],role:c[l],vote:p?-1:t.votesRound[l],leader:t.leader===l||!1===t.started&&0===l,isRes:["Resistance?","Resistance","Percival","Merlin","Merlin?"].includes(c[l]),isPickable:m||u||h,onMission:t.picks.includes(l),table:this},b=Math.floor(o.length/2);if(o.length<4)switch(l){case 0:s.push(d);break;default:i.push(d)}else switch(l){case 0:a.push(d);break;case b:r.push(d);break;default:l<b?s.push(d):i.push(d)}}this.setState({left:a,top:s,right:r,bot:i},e)}},{key:"countSelected",value:function(){var e=[];this.avatarRef.forEach((function(t,a){t.current.state.picked&&e.push(a)})),this.setState({selected:e})}},{key:"resizeTable",value:function(){var e=this.tableRef.current.getBoundingClientRect();this.setState({width:Math.min(4.5*e.height,e.width)}),this.initAvatars()}},{key:"initAvatars",value:function(){var e=this;this.allTimeouts.forEach((function(e){return clearTimeout(e)}));this.allTimeouts.push(setTimeout((function(){e.moveAvatars(),e.allTimeouts.push(setTimeout(e.moveShields,550))}),50))}},{key:"moveAvatars",value:function(){var e=this;this.avatarRef.forEach((function(t,a){var n=t.current,s=e.seatRef[a].current.getBoundingClientRect();n.setState({width:e.state.width,avatarShow:!1,avatarInitialPosition:[s.height/2,s.width/2]})}));this.allTimeouts.push(setTimeout((function(){return e.avatarRef.forEach((function(t,a){var n=t.current,s=e.centerRef.current.getBoundingClientRect(),r=e.seatRef[a].current.getBoundingClientRect();n.setState({avatarShow:!0,avatarPosition:[s.top-r.top,s.left-r.left]})}))}),10),setTimeout((function(){return e.avatarRef.forEach((function(e,t){var a=e.current;a.setState({avatarPosition:a.state.avatarInitialPosition})}))}),50))}},{key:"moveShields",value:function(){var e=this;this.avatarRef.forEach((function(e,t){var a=e.current;a.props.onMission&&a.setState({shieldShow:!1})}));this.allTimeouts.push(setTimeout((function(){return e.avatarRef.forEach((function(t,a){var n=t.current;if(n.props.onMission){var s=e.centerRef.current.getBoundingClientRect(),r=n.shieldLocation.current.getBoundingClientRect();n.setState({shieldShow:!0,shieldPosition:[s.top-r.top,s.left-r.left]})}}))}),10),setTimeout((function(){return e.avatarRef.forEach((function(e,t){var a=e.current;a.props.onMission&&a.setState({shieldPosition:[0,0]})}))}),200),setTimeout((function(){return e.avatarRef.forEach((function(e,t){var a=e.current;a.props.onMission&&a.setState({shieldScale:1.2})}))}),900),setTimeout((function(){return e.avatarRef.forEach((function(e,t){var a=e.current;a.props.onMission&&a.setState({shieldScale:1})}))}),1150))}},{key:"leaveLobby",value:function(){return!1}},{key:"render",value:function(){var e=this,t=this.props.game,a=this.state.left.length,n=this.state.top.length+a,r=this.state.right.length+n,i=function(t,a,n){return s.a.createElement("div",{className:"table-seat",ref:e.seatRef[a+n],key:"Seat"+a},s.a.createElement(Ee,Object.assign({},t,{ref:e.avatarRef[a+n]})))};return s.a.createElement("div",{id:"Table",className:"tab"},s.a.createElement("div",{className:"table-row table-buttons"},this.state.redirect?s.a.createElement(f.a,{to:"/lobby"}):null,s.a.createElement(x,{type:"button",text:"Exit",onClick:function(){e.setState({redirect:!0})},className:""}),s.a.createElement(x,{type:"button",text:"Claim",onClick:void 0,className:""})),s.a.createElement("div",{className:"table-row table-display",ref:this.tableRef,style:{width:"95%"}},s.a.createElement("div",{className:"table-column"},s.a.createElement("div",{className:"table-prow"},this.state.left.map((function(e,t){return i(e,t,0)})))),s.a.createElement("div",{className:"table-column"},s.a.createElement("div",{className:"table-prow"},this.state.top.map((function(e,t){return i(e,t,a)}))),s.a.createElement("div",{className:"table-prow"},s.a.createElement("div",{className:"table-center",ref:this.centerRef},t.started?s.a.createElement(ye,{count:Math.max(t.players.length-5,0),results:t.results,round:t.round}):null)),s.a.createElement("div",{className:"table-prow"},this.state.bot.map((function(e,t){return i(e,t,r)})).reverse())),s.a.createElement("div",{className:"table-column"},s.a.createElement("div",{className:"table-prow"},this.state.right.map((function(e,t){return i(e,t,n)}))))),s.a.createElement("div",{className:"table-row table-info"},s.a.createElement(fe,Object.assign({},t,{selected:this.state.selected}))))}}]),a}(n.Component),Se=(a(511),function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(m.a)(this,a),(s=t.call(this,e)).initialHeight=Math.max(window.innerHeight,540),s.resizeCount=1,s.tableRef=Object(n.createRef)(),s.state={username:"Oken",players:[],seat:-1,started:void 0,ended:void 0,frozen:void 0,stage:void 0,cause:void 0,tabs:2,scale:1,picks:[],votesRound:[],voted:[],publicKnowledge:[],privateKnowledge:[],leader:-1,card:-1,assassin:!1,mission:-1,round:-1,results:[],missionVotes:[[],[],[],[],[]],missionTeams:[[],[],[],[],[]],missionLeader:[],code:-1,playerMax:0,roleSettings:{merlin:!1,percival:!1,morgana:!1,assassin:!1,oberon:!1,mordred:!1,card:!1}},s.triggerRequest=s.triggerRequest.bind(Object(p.a)(s)),s.parseGame=s.parseGame.bind(Object(p.a)(s)),s.setTableHeight=s.setTableHeight.bind(Object(p.a)(s)),s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){S.on("gameUpdate",this.triggerRequest),S.on("gameResponse",this.parseGame),S.emit("roomJoin",{roomNumber:this.props.match.params.id})}},{key:"componentWillUnmount",value:function(){S.off("gameUpdate",this.triggerRequest),S.off("gameResponse",this.parseGame),S.emit("joinLeaveGame",{roomNumber:this.state.code,canSit:!1}),S.emit("roomLeave",{roomNumber:this.props.match.params.id})}},{key:"triggerRequest",value:function(){S.emit("gameRequest",{roomNumber:this.props.match.params.id})}},{key:"parseGame",value:function(e){var t=this;e.tabs=this.state.tabs,e.scale=this.state.scale,this.setState(e,(function(){t.resizeCount&&t.tableRef.current.resizeTable(),t.resizeCount=0}))}},{key:"setTableHeight",value:function(){this.setState({scale:(this.state.scale+.1)%1.1}),this.tableRef.current.resizeTable()}},{key:"render",value:function(){for(var e=[],t=0;t<this.state.tabs;t++)e.push(s.a.createElement(de,{key:"Tab"+t,game:this.state}));return s.a.createElement("div",{id:"Background-2",className:"dark full"},s.a.createElement(V,{username:""}),s.a.createElement(R,null,s.a.createElement("div",{id:"Game",style:{minHeight:this.initialHeight+"px"},className:"section"},s.a.createElement("div",{className:"column section",style:{flex:"0 0 "+(40+20*this.state.scale)+"%"}},s.a.createElement(ke,{ref:this.tableRef,game:this.state})),s.a.createElement("div",{className:"column section"},e))))}}]),a}(n.Component)),Oe=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return s.a.createElement("p",null,"404. Page not found.")}}]),a}(n.Component),Ne={authenticated:!1,verified:!1,loading:!0,width:0,height:0},we=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).dispatchCount=1,n.state=Ne,n.updateState=n.updateState.bind(Object(p.a)(n)),n.updateDimensions=n.updateDimensions.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.addEventListener("resize",this.updateDimensions),S.on("connectionStarted",this.updateState);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions),S.disconnect()}},{key:"componentDidUpdate",value:function(e){e.online!==this.props.online&&this.dispatchCount<1&&this.updateState(),this.dispatchCount=0}},{key:"updateState",value:function(){var e=y.User.current();if(e){var t=e.getUsername();this.props.dispatch({type:"SET_USERNAME",text:t||"-"}),this.props.dispatch(j(!0)),this.setState({authenticated:!0,verified:!0,loading:!1}),S.emit("parseLink",e)}else this.props.dispatch(j(!1)),this.setState({authenticated:!1,verified:!1,loading:!1}),S.emit("parseUnlink")}},{key:"updateDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"render",value:function(){return!0===this.state.loading?null:s.a.createElement(s.a.Fragment,null,s.a.createElement(v.a,null,s.a.createElement(f.d,null,s.a.createElement(w,{exact:!0,path:"/",authenticated:this.state.authenticated,component:D}),s.a.createElement(w,{exact:!0,path:"/signup",authenticated:this.state.authenticated,component:F}),s.a.createElement(C,{exact:!0,path:"/verify",authenticated:this.state.authenticated,verified:this.state.verified,component:Y}),s.a.createElement(N,{exact:!0,path:"/lobby",authenticated:this.state.authenticated,verified:this.state.verified,component:ce}),s.a.createElement(N,{path:"/profile/:username",authenticated:this.state.authenticated,verified:this.state.verified,component:ue}),s.a.createElement(N,{path:"/game/:id",authenticated:this.state.authenticated,verified:this.state.verified,component:Se}),s.a.createElement(f.b,{component:Oe}))),s.a.createElement("span",{style:{display:"none"}},"Window size: ",this.state.width," x ",this.state.height))}}]),a}(n.Component),Ce=Object(o.b)((function(e){return{online:e.online}}),null)(we);i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(o.a,{store:B},s.a.createElement(Ce,{online:!0,dispatch:o.c}))),document.getElementById("root"))}},[[217,1,2]]]);
//# sourceMappingURL=main.cff0fb5e.chunk.js.map